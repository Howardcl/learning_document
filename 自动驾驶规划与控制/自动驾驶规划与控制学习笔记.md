# 1.自动驾驶规划概况

## 1.1 自动驾驶的不同等级

![image-20230811150552576](https://raw.githubusercontent.com/Howardcl/MyImage/main/img/202308111505683.png)

L3是一个重要的分水岭。可以不用将注意力专注在车上。

L3和L4的重要区别：出现故障，L4可以自动恢复。

ODD：评判自动驾驶能力的指标。

![image-20230811151259626](https://raw.githubusercontent.com/Howardcl/MyImage/main/img/202308111512697.png)

## 1.2 无人车的基本组成部分及功能介绍

![image-20230811151439215](https://raw.githubusercontent.com/Howardcl/MyImage/main/img/202308111514306.png)

预测：输入就是perception的输出。

1.基于模型的预测方法

2.基于数据驱动的预测方法，也就是深度学习。

难点：行人在不规则环境下的预测。

![image-20230811152928609](https://raw.githubusercontent.com/Howardcl/MyImage/main/img/202308111529739.png)

规划模块：

输入部分包括感知、地图、定位

输出：主要是给控制部分，也有可能给到感知部分。

![image-20230811153114107](https://raw.githubusercontent.com/Howardcl/MyImage/main/img/202308111531206.png)

控制模块：

目标：根据现在的状态，来追踪路径。

输出：合理的轨迹，油门、刹车、方向盘。

![image-20230811153315481](https://raw.githubusercontent.com/Howardcl/MyImage/main/img/202308111533595.png)

## 1.3 规划控制的基本组成



![image-20230811153509235](https://raw.githubusercontent.com/Howardcl/MyImage/main/img/202308111535345.png)

**路由规划：Route/Mission Planning**

基于路网，决定道路。

**行为决策：Decision making**

借助有限状态机设计决策过程。



![image-20230811154006665](https://raw.githubusercontent.com/Howardcl/MyImage/main/img/202308111540780.png)

**运动规划：Local planner 局部规划。**

设计加速度、曲率、曲率的高阶导数。输出带有时间信息的曲线。

解决带有约束的优化问题。

可以拆分为轨迹规划和速度规划。

==轨迹规划是为了解决平面上的轨迹生成问题，优化问题。==

==速度规划：选定了轨迹之后，解决用什么速度来行驶的问题。==

![image-20230811154221451](https://raw.githubusercontent.com/Howardcl/MyImage/main/img/202308111542576.png)

**控制：主要用的方法：PID、Stanley、MPC、LQR等等**

![image-20230811154852860](https://raw.githubusercontent.com/Howardcl/MyImage/main/img/202308111548950.png)

## 1.4 课程结构

从下往上

![image-20230811155029743](https://raw.githubusercontent.com/Howardcl/MyImage/main/img/202308111550804.png)

# 2.车辆纵向控制Vehicle Longitudinal Control

![image-20230811155317543](https://raw.githubusercontent.com/Howardcl/MyImage/main/img/202308111553594.png)

## 2.1 车辆纵向动力学模型

要想建立车辆的纵向动力学模型，首先要明确车辆在纵向的控制情况 。

$F_{xf}$：驱动力，使得车辆前进的力，分为前轮和后轮。

$R_{xf}$:滚动阻力，车辆在路上滚动时受到的阻力，由于摩擦等因素产生。

$F_{aero}$：空气阻力

等于纵向力

![image-20230811155818949](https://raw.githubusercontent.com/Howardcl/MyImage/main/img/202308111558064.png)

空气阻力的计算：

![image-20230811160432887](https://raw.githubusercontent.com/Howardcl/MyImage/main/img/202308111604995.png)

滚动阻力

![image-20230811162127659](https://raw.githubusercontent.com/Howardcl/MyImage/main/img/202308111621812.png)

==整车与车轮的纵向动力学方程==

![image-20230811162855694](https://raw.githubusercontent.com/Howardcl/MyImage/main/img/202308111628792.png)

整车的纵向控制

控制状态包括：纵向速度、加速度和纵向距离

控制输入包括：推力和刹车

![image-20230811163006525](https://raw.githubusercontent.com/Howardcl/MyImage/main/img/202308111630609.png)

## 2.2 经典反馈控制